<Window x:Class="TinyUnrealPackerExtended.DialogWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:TinyUnrealPackerExtended.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TinyUnrealPackerExtended"
        xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
        xmlns:local1="clr-namespace:TinyUnrealPackerExtended.Converters"
        mc:Ignorable="d"
        Title="{Binding Title}"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        SizeToContent="WidthAndHeight"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
        <!-- Тень, аналогичная CardStyle -->
        <DropShadowEffect x:Key="CardShadowEffect"
                          BlurRadius="10"
                          Opacity="0.15"
                          ShadowDepth="2" />

        <!-- Конвертеры для иконки и цвета -->
        <local1:DialogTypeToIconConverter x:Key="DialogTypeToIconConverter" />
        <local1:DialogTypeToColorConverter x:Key="DialogTypeToColorConverter" />
        
    </Window.Resources>

    <Border CornerRadius="9"
            BorderBrush="{DynamicResource WindowBackgroundBrush}"
            BorderThickness="1">

        <Border CornerRadius="8"
                Background="{DynamicResource CardBackgroundBrush}"
                Padding="24">
            <StackPanel>
                <!-- Иконка состояния -->
                <iconPacks:PackIconMaterial
                        Kind="{Binding DialogType, Converter={StaticResource DialogTypeToIconConverter}}"
                                            Width="40"
                                            Height="40"
                                            Foreground="{Binding DialogType, Converter={StaticResource DialogTypeToColorConverter}}"
                                            HorizontalAlignment="Center" />

                <TextBlock Text="{Binding Title}"
                           FontSize="18"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource TextPrimaryBrush}"
                           Margin="0,12,0,4"
                           TextAlignment="Center" />

                <TextBlock Text="{Binding Message}"
                           FontSize="14"
                           TextWrapping="Wrap"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           Margin="0,0,0,16"
                           TextAlignment="Center" />

                <TextBox Text="{Binding ResponseText, UpdateSourceTrigger=PropertyChanged}"
                         Visibility="{Binding IsInputDialog, Converter={StaticResource BoolToVis}}"
                         Background="{DynamicResource SecondaryButtonBackgroundBrush}"
                         Margin="0,8"
                         MinWidth="200" />

                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center">
                    <Button Content="{Binding SecondaryText}"
                            Command="{Binding SecondaryButtonCommand}"
                            Style="{StaticResource SecondaryButtonStyle}"
                            Margin="0,0,8,0"
                            Cursor="Hand" />
                    <Button Content="{Binding PrimaryText}"
                            Command="{Binding PrimaryButtonCommand}"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Margin="0" />
                </StackPanel>
            </StackPanel>
        </Border>
    </Border>
</Window>
